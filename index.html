<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/articles/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/articles/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/articles/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/articles/images/logo.svg" color="#222">

<link rel="stylesheet" href="/articles/css/main.css">


<link rel="stylesheet" href="/articles/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tubetrue01.github.io","root":"/articles/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Tubetrue01">
<meta property="og:url" content="https://tubetrue01.github.io/">
<meta property="og:site_name" content="Tubetrue01">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Tubetrue01">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://tubetrue01.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Tubetrue01</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/articles/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Tubetrue01</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/articles/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/articles/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/articles/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tubetrue01.github.io/2024/10/07/entertainment/Frps%E5%AE%9E%E7%8E%B0%E4%BD%A0%E7%9A%84%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/articles/img/head.PNG">
      <meta itemprop="name" content="Tubetrue01">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tubetrue01">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/2024/10/07/entertainment/Frps%E5%AE%9E%E7%8E%B0%E4%BD%A0%E7%9A%84%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" class="post-title-link" itemprop="url">Frps å®ç°å†…ç½‘ç©¿é€</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-10-07 20:08:05" itemprop="dateCreated datePublished" datetime="2024-10-07T20:08:05+08:00">2024-10-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-10-11 23:36:18" itemprop="dateModified" datetime="2024-10-11T23:36:18+08:00">2024-10-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>æœ€è¿‘ç»™è€å®¶çš„çˆ¸å¦ˆå‡çº§äº†ä¸‹ç½‘ç»œè®¾å¤‡ï¼Œè®©ä»–ä»¬ä¹Ÿèƒ½éšæ—¶ç©äº› YouTubeã€Netflixã€‚ä¸ºäº†ç»™å­©å­çœ‹åŠ¨ç”»ç‰‡ï¼Œé¡ºä¾¿å®‰è£…äº† Jellyfinï¼Œä½¿å…¶è¿œç¨‹è¿æ¥åˆ°æˆ‘çš„ NAS ç³»ç»Ÿã€‚åŒæ—¶ä¸ºäº†çº¦æŸåæœŸå­©å­çš„ä¸Šç½‘è¡Œä¸ºï¼Œè½¯è·¯ç”±åˆ™æ˜¯å¿…é¡»è¦å®‰æ’çš„äº†ã€‚è€å®¶çš„å®½å¸¦ç”¨çš„ç”µä¿¡ï¼Œé‚£ä¹ˆé¡ºä¾¿ä¹Ÿæ”¹ä¸‹æ¡¥æ¥ï¼Œè¦ä¸ªå…¬ç½‘å§ã€‚</p>
<p>æ¡¥æ¥å¾ˆå¿«å®‰æ’äº†ï¼Œä½†æ˜¯æ‹¨å·åæ‹¿åˆ°çš„ç¡®å®å†…ç½‘ ipï¼Œè¿™ä¸æç¬‘å˜›ï¼Œèµ¶ç´§è”ç³»äº†è£…ç»´äººå‘˜ï¼Œè¢«å‘ŠçŸ¥ä¿å®šå·²ç»ä¸è®©ç”³è¯·å…¬ç½‘ ip äº†ã€‚æ— å¥ˆï¼Œåªå¥½æ”¾å¼ƒï¼Œè™½ç„¶ç‰ºç‰²äº†éƒ¨åˆ†åŠŸèƒ½ï¼Œä½†æ˜¯èµ·ç èƒ½ç”¨ã€‚è™½ç„¶æ‹¿ä¸åˆ°å…¬ç½‘ipï¼Œä½†æ˜¯å¯ä»¥å†…ç½‘ç©¿é€ä¸æ˜¯ï¼</p>
<p>è½¯è·¯ç”±æ­£å¥½è‡ªå¸¦äº† frpc å®¢æˆ·ç«¯ï¼Œçœ‹äº†ä¸‹å¤§æ¦‚çš„åŸç†ï¼Œéœ€è¦ä¸€ä¸ªå…·æœ‰å…¬ç½‘çš„æœåŠ¡å™¨ï¼Œè¿™ä¸ç®€å•ï¼Œç›´æ¥ç”¨æˆ‘ä»£ç†çš„æœåŠ¡å™¨å°±è¡Œäº†ã€‚åŸŸåï¼Ÿè¿™æ›´ä¸åœ¨è¯ä¸‹äº†ï¼Œæ¯•ç«Ÿæ˜¯å¼€å‘äººå‘˜ï¼ŒåŸŸåæ˜¯å¿…é¡»çš„ã€‚å‰©ä¸‹çš„å°±æ˜¯éƒ¨ç½² frps æœåŠ¡ç«¯äº†ã€‚</p>
<p>è½¯è·¯ç”±å¸¦çš„ frpc ç‰ˆæœ¬æ¯”è¾ƒè€â€”â€”v0.40.0 çš„ï¼Œä¹Ÿåªèƒ½ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„æœåŠ¡ç«¯äº†ã€‚a long time laterâ€¦ï¼Œä¸€é¡¿æ“ä½œä¹‹åï¼Œèƒ½å¤Ÿè®¿é—®äº†ï¼Œä½†æ˜¯å‡ æ¬¡ä¸‹æ¥ï¼Œç›´æ¥é˜»æ–­äº†ã€‚å®Œï¼Œè¢«è¿è¥å•† QoS äº†ï¼Œçœ‹äº†ä¸‹æ–¹æ¡ˆï¼Œé‡‡ç”¨ TLS æˆ–è€… KCP å¯ä»¥è§£å†³ QoS é—®é¢˜ï¼Œä½†æ˜¯å‘ç°æ•ˆæœå¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼Œå†åŠ ä¸Šä¸æ˜¯ä»€ä¹ˆåˆšéœ€ï¼Œå°è¯•äº†å‡ æ¬¡ä¹‹åï¼Œæ”¾å¼ƒäº†ã€‚</p>
<h1 id="è½¬æœº"><a href="#è½¬æœº" class="headerlink" title="è½¬æœº"></a>è½¬æœº</h1><p>äº‹æƒ…å‡ºç°äº†â€œè½¬æœºâ€ï¼ˆå¦åˆ™ä¹Ÿæ²¡æœ‰æœ¬ç¯‡æ–‡ç« çš„å‡ºç°äº†ï¼‰ï¼Œå‡ å¤©å‰æ‰“ç®—æŠŠå­©å­çš„ç…§ç‰‡ä¸Šä¼ åˆ° NAS é‡Œï¼Œç”±äºæ˜¯æ™šä¸Šï¼Œä¼ äº†éƒ¨åˆ†ä¹‹åï¼Œå°±ç¡è§‰äº†ï¼Œæ‰“ç®—è®©å®ƒåå°æ…¢æ…¢ä¼ ã€‚ç„¶åç¬¬äºŒå¤©çœ‹çœ‹ä¼ çš„è¿›åº¦ã€‚â€œè½¬æœºâ€å‡ºç°äº†ï¼Œç›¸å†Œæ‰“ä¸å¼€äº†ï¼Œå°è¯•äº†å‡ æ¬¡ä¹‹åå‘ç°è¿˜æ˜¯ä¸è¡Œã€‚å‡ºç°è¿™ä¸ªé—®é¢˜æˆ‘æƒ³å¤§æ¦‚åªæœ‰ä¸‰ç§æƒ…å†µï¼šä¸€ã€å®¶é‡Œæ–­ç½‘äº†ï¼›äºŒã€DDNS æ­£åœ¨æ›´æ–°ï¼›ä¸‰ã€å…¬ç½‘ ip å‡ºé—®é¢˜äº†ã€‚ä½†æ˜¯æˆ‘çªç„¶æœ‰ç§ä¸å¥½çš„é¢„æ„Ÿï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½å‘ç”Ÿç¬¬ä¸‰ç§æƒ…å†µï¼Œå› ä¸ºå‰ä¸¤ç§æƒ…å†µæ˜¯å¾ˆå¥½æ’é™¤çš„ã€‚</p>
<p>ä¸ºäº†éªŒè¯æˆ‘çš„çŒœæƒ³ï¼Œèµ¶ç´§å›åˆ°å°åŒºï¼Œè¿›å…¥è·¯ç”±åå°ä¸€çœ‹ï¼Œå¿ƒå‡‰äº†ï¼Œæ‹¨å·åæ‹¿åˆ°çš„ ip å°±æ˜¯ä¸€ä¸ªå†…ç½‘ ipã€‚æ­¤æ—¶å†…å¿ƒçš„å¿ƒæƒ…ï¼Œä½ æ‡‚çš„ï¼Œæƒ³æŠŠç”µä¿¡æ•´ä¸ªæ—è°±é—®å€™ä¸€éï¼ˆæ²¡é”™ï¼Œæˆ‘å°åŒºç”¨çš„ä¹Ÿæ˜¯ç”µä¿¡çš„å®½å¸¦ï¼‰ã€‚ä¸è€å®¶ä¸åŒï¼Œå¦‚æœæ²¡æœ‰å…¬ç½‘ ipï¼Œé‚£ä¹ˆæ„å‘³ç€æ‰€æœ‰çš„ç½‘ç»œæ‹“æ‰‘ OpenWrtã€QBã€NAS éƒ½ä¼šå‡ºç°é—®é¢˜ã€‚èµ¶ç´§æ‰“äº† 10000 æŠ•è¯‰ï¼Œä¸­é—´çš„è¿‡ç¨‹çœç•¥äº†ï¼Œæ€»ä¹‹ç”¨ç½‘åè®®éƒ½ç­¾äº†ï¼Œä¹Ÿä¸è¡Œï¼Œå…¬ç½‘ ip æ­»æ´»ä¸ç»™ã€‚æƒ³è¦å…¬ç½‘ ip åªèƒ½ä¸“çº¿ï¼Œä»·æ ¼å˜›ï¼Œ20M å®½å¸¦ 2400 ä¸€å¹´ã€‚</p>
<p>å¯¹äºå…¬ç½‘ ipï¼Œé™¤äº†ç”µä¿¡ï¼Œå°±åªèƒ½é—®é—®è”é€šäº†ï¼Œç»“æœä¸ç”¨æƒ³ã€‚</p>
<h1 id="æ–¹æ¡ˆç¡®å®š"><a href="#æ–¹æ¡ˆç¡®å®š" class="headerlink" title="æ–¹æ¡ˆç¡®å®š"></a>æ–¹æ¡ˆç¡®å®š</h1><p>ç”±äºè¯•è¿‡ frpï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆæˆ‘æ˜¯ç›´æ¥ pass çš„ï¼Œç»™æˆ‘çš„æ„Ÿè§‰æ˜¯ä¸ç¨³å®šã€‚å…ˆå‰ç”¨è¿‡ ngrokï¼Œæ‰€ä»¥æƒ³çœ‹çœ‹å®ƒçš„ä»˜è´¹æ–¹æ¡ˆï¼Œæ¯•ç«Ÿæˆ‘éœ€è¦ä¸€ä¸ªç¨³å®šçš„æ–¹æ¡ˆã€‚æ¯æœˆæœ€ä½ 8 åˆ€çš„ä»·æ ¼ä¹Ÿå¹¶æ²¡æ»¡è¶³æˆ‘å½“ä¸‹çš„éœ€æ±‚ã€‚</p>
<p>å°è¯•äº†ä¸å°‘å›½å†…çš„ä»˜è´¹æ–¹æ¡ˆå‘ç°è¦ä¸ä¸ç¨³å®šï¼Œè¦ä¸ä¸æ»¡è¶³æˆ‘å½“ä¸‹çš„éœ€æ±‚ï¼Œæ— å¥ˆåªèƒ½æ”¾å¼ƒã€‚æ­¤æ—¶è„‘æµ·é‡Œç¬¦åˆæˆ‘é¢„æœŸçš„å°±æ˜¯ frp äº†ã€‚æˆ‘åœ¨æƒ³ä¸ç¨³å®šæ˜¯ä¸æ˜¯ç‰ˆæœ¬å¤ªè€äº†ï¼Œè¯•è¯•æœ€æ–°çš„ç‰ˆæœ¬çœ‹çœ‹å¦‚ä½•ã€‚</p>
<h1 id="frp-å®ç°å†…ç½‘ç©¿é€"><a href="#frp-å®ç°å†…ç½‘ç©¿é€" class="headerlink" title="frp å®ç°å†…ç½‘ç©¿é€"></a>frp å®ç°å†…ç½‘ç©¿é€</h1><p>æ­¤æ¬¡ç¡®å®šæ–¹æ¡ˆçš„ç‰ˆæœ¬ä¸º v0.60.0ï¼Œç»è¿‡äº†å‡ æ¬¡æµ‹è¯•ä¹‹åï¼Œå‘ç°è¿œæ¯” v0.40.0 ç‰ˆæœ¬å¼ºå¤šäº†ï¼Œæ‰€ä»¥æ–¹æ¡ˆæœ€ç»ˆæ•²å®šã€‚</p>
<h2 id="æœåŠ¡ç«¯éƒ¨ç½²"><a href="#æœåŠ¡ç«¯éƒ¨ç½²" class="headerlink" title="æœåŠ¡ç«¯éƒ¨ç½²"></a>æœåŠ¡ç«¯éƒ¨ç½²</h2><p>æœåŠ¡ç«¯æ¯”å®¢æˆ·ç«¯éƒ¨ç½²è¦ç®€å•çš„å¤šï¼Œé…ç½®æ–‡ä»¶ä¹Ÿæ¯”è¾ƒç®€å•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bindPort = 7000</span><br><span class="line">vhostHTTPSPort = 443</span><br><span class="line">auth.method = &quot;token&quot;</span><br><span class="line">auth.token = &quot;xxxxx&quot;</span><br><span class="line">transport.tcpMux = true</span><br></pre></td></tr></table></figure>
<p>7000 ä¸ºæœåŠ¡ç›‘å¬ç«¯å£ï¼Œè´Ÿè´£å®¢æˆ·ç«¯çš„è¿æ¥ï¼ˆè¿™é‡Œå°±ä¸ä»‹ç»åŸç†ï¼‰ï¼Œ443 ä¸º HTTPS è®¿é—®ç«¯å£ï¼Œä¹Ÿå¯ä»¥æ”¹æˆå…¶ä»–çš„ï¼ˆå¦‚æœä»…ä»…æ˜¯  HTTP è®¿é—®ï¼Œåˆ™éœ€è¦æ”¹æˆ vhostHTTPPortï¼‰ã€‚åæœŸè®¿é—®å°±æ˜¯ï¼šhttps://åŸŸå+ç«¯å£ã€‚æ¥ä¸‹æ¥ä¸¤ä¸ªå‚æ•°å°±æ˜¯å®¢æˆ·ç«¯è®¤è¯æ–¹æ³•ã€‚æœ€åä¸€ä¸ªå‚æ•°ä¸ºå¤šè·¯å¤ç”¨ï¼Œè¯¥å‚æ•°å…·æœ‰äº‰è®®ï¼Œæœ‰äººè¯´å…³é—­ä¹‹åï¼ŒæœåŠ¡ç¨³å®šæ€§ä¸‹é™ï¼Œä½†æ˜¯é€Ÿåº¦æå‡ã€‚å¼€å¯åˆ™ç›¸åï¼Œæˆ‘è¿™é‡Œä¹‹æ‰€ä»¥å¼€å¯æ˜¯å› ä¸ºï¼Œå…³é—­çŠ¶æ€ä¸‹ï¼Œå…¬ç½‘è®¿é—®éš”æ®µæ—¶é—´å°±ä¼šæ–­æµï¼Œå¼€å¯çŠ¶æ€ä¸‹åˆ™æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯å¼€å¯æœåŠ¡å™¨çš„é˜²ç«å¢™ï¼Œæ”¾è¡Œ <code>bindPort</code>ã€<code>vhostHTTPSPort</code> ä¸¤ä¸ªç«¯å£ã€‚ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ç”¨ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ./frps -c ./frps.toml &gt; info.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>

<h2 id="å®¢æˆ·ç«¯éƒ¨ç½²"><a href="#å®¢æˆ·ç«¯éƒ¨ç½²" class="headerlink" title="å®¢æˆ·ç«¯éƒ¨ç½²"></a>å®¢æˆ·ç«¯éƒ¨ç½²</h2><p>å®¢æˆ·ç«¯æœ€å¼€å§‹æ‰“ç®—å‡çº§ OpenWrt ä¸­ frpc çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯åˆç‰µæ‰¯åˆ°è§†å›¾å±‚äº†ï¼Œæ‰€ä»¥æ”¾å¼ƒäº†ã€‚é‚£ä¹ˆå°±éœ€è¦æ›´æ¢å…¶ä»–çš„æ–¹æ¡ˆã€‚ä»”ç»†æƒ³ä¸€ä¸‹ï¼Œfrpc å…¶å®å°±æ˜¯ä¸€ä¸ªæ³¨å†ŒæœåŠ¡ï¼Œæœ‰æ²¡æœ‰è§†å›¾æ— æ‰€è°“ï¼Œé‚£ä¹ˆè¿™ä¸å°±æ›´é€‚åˆ Docker ä¸­éƒ¨ç½²å˜›ã€‚è€Œç¯å¢ƒä¸­çš„ Docker å…¨æƒæ˜¯äº¤ç»™ NAS ä¸­çš„ï¼Œé‚£ä¹ˆ frpc å°±é¡ºç†æˆç« çš„ç”± NAS æ‰˜ç®¡å°±å¥½äº†ã€‚</p>
<ul>
<li><h3 id="é•œåƒåˆ¶ä½œ"><a href="#é•œåƒåˆ¶ä½œ" class="headerlink" title="é•œåƒåˆ¶ä½œ"></a>é•œåƒåˆ¶ä½œ</h3><p>è¿è¡Œæ—¶ç¯å¢ƒé‡‡ç”¨ alpineï¼Œå°† frpc æ‰“åˆ°é•œåƒä¸­ï¼Œç”±äºæœåŠ¡çš„æ³¨å†Œæ˜¯ä»¥é…ç½®æ–‡ä»¶çš„æ–¹å¼å®ç°çš„ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†é…ç½®æ–‡ä»¶æš´éœ²å‡ºæ¥ä»¥æŒ‚è½½çš„æ–¹å¼å®ç°åŠ¨æ€æ³¨å†Œã€‚</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> alpine:<span class="number">3.20</span>.<span class="number">3</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apk add tzdata &amp;&amp; cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime </span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> frpc /usr/<span class="built_in">local</span>/apps/frpc/bin/frpc</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> chmod +x /usr/<span class="built_in">local</span>/apps/frpc/bin/frpc</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [ <span class="string">&quot;sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;./usr/local/apps/frpc/bin/frpc -c /usr/local/apps/frpc/config/frpc.toml&quot;</span>]</span></span><br></pre></td></tr></table></figure>
<p>å†…å®¹ä¹Ÿå¾ˆç®€å•ï¼Œé…ç½®å¥½æ—¶åŒºï¼Œç„¶åè¿è¡Œ frpcï¼Œæˆ‘ä»¬è¿è¡Œçš„æ—¶å€™ï¼Œéœ€è¦å°†é…ç½®æ–‡ä»¶æŒ‚è½½å‡ºæ¥ã€‚</p>
</li>
<li><h3 id="é…ç½®æ–‡ä»¶å¤„ç†"><a href="#é…ç½®æ–‡ä»¶å¤„ç†" class="headerlink" title="é…ç½®æ–‡ä»¶å¤„ç†"></a>é…ç½®æ–‡ä»¶å¤„ç†</h3><p>ä¸ºäº†æ–¹ä¾¿é…ç½®æ–‡ä»¶çš„æ›´æ–°åŒæ­¥ï¼Œæˆ‘æŠŠé…ç½®æ–‡ä»¶å­˜åˆ° NAS ä¸­ï¼ŒåŒæ—¶å°†å®ƒä¸æœ¬åœ°åŒå‘åŒæ­¥ï¼Œè¿™æ ·ï¼Œæœ¬åœ°ä¿®æ”¹ä¹‹åå°±ä¼šåŒæ­¥åˆ°è¿œç¨‹ NASï¼Œä»è€Œè¿›ä¸€æ­¥è¢« NAS ä¸­çš„ frpc æ„ŸçŸ¥åˆ°ï¼Œä»è€Œå®ç°æ›´æ–°ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿é…ç½®æ–‡ä»¶çš„ç®¡ç†ï¼Œæˆ‘æŒ‰ç…§ä»¥ä¸‹è·¯å¾„å­˜æ”¾ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">|---frp</span><br><span class="line">    |---certs</span><br><span class="line">          |---xxx.pem</span><br><span class="line">          |---xxx.key</span><br><span class="line">    |---confd</span><br><span class="line">          |---a.toml</span><br><span class="line">          |---b.toml</span><br><span class="line">          |---c.toml</span><br><span class="line">    |---frpc.toml</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŒ‚è½½çš„æ—¶å€™ï¼Œç›´æ¥æŒ‚è½½ frp ç›®å½•å³å¯ï¼Œcerts è¯ä¹¦ç›®å½•ã€confd é…ç½®ç›®å½•ã€frpc.toml å…¥å£æ–‡ä»¶åˆ™è‡ªåŠ¨æŒ‚è½½äº†ã€‚</p>
<ul>
<li><p>frpc.toml</p>
 <figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">serverAddr</span> = <span class="string">&quot;å…¬ç½‘åŸŸå&quot;</span></span><br><span class="line"><span class="attr">serverPort</span> = <span class="number">443</span></span><br><span class="line"><span class="attr">auth.method</span> = <span class="string">&quot;token&quot;</span></span><br><span class="line"><span class="attr">auth.token</span> = <span class="string">&quot;xxxxx&quot;</span></span><br><span class="line"><span class="attr">transport.tcpMux</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">includes</span> = [<span class="string">&quot;/usr/local/apps/frpc/config/confd/*.toml&quot;</span>]</span><br></pre></td></tr></table></figure>

<p>ç”±äºæˆ‘ä»¬è¦æš´éœ²åˆ°å…¬ç½‘çš„æœåŠ¡æ¯”è¾ƒå¤šï¼Œå…¨éƒ¨æ”¾åˆ° frpc ä¸­å…¶å®ä¸ä¾¿äºç®¡ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ©ç”¨ <code>includes</code> å‚æ•°å°†ä»–ä»¬åˆ†æ•£åˆ°å¤–éƒ¨çš„ <code>confd</code> è·¯å¾„ä¸­ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåªè¦ä½ æƒ³å¢åŠ æš´éœ²çš„æœåŠ¡ï¼Œå¾€ <code>confd</code> ä¸­æ–°å¢ä¸€ä¸ªé…ç½®æ–‡ä»¶å³å¯ï¼Œæ— éœ€ä¿®æ”¹å­˜é‡æ–‡ä»¶ã€‚</p>
<p><code>serverAddr</code> æˆ‘æ¨èå†™æˆåŸŸåï¼Œè¿™æ ·å½“åŸŸååçš„æœåŠ¡æ›´æ–°æ—¶ï¼Œä¹Ÿä¸éœ€è¦æ›´æ”¹é…ç½®æ–‡ä»¶äº†ã€‚</p>
</li>
<li><p>xxx.tmol</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[[proxies]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;AdGuardHome&quot;</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;https&quot;</span></span><br><span class="line"><span class="attr">customDomains</span> = [<span class="string">&quot;ad.äºŒçº§åŸŸå&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">transport.useEncryption</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">transport.useCompression</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">healthCheck.type</span> = <span class="string">&quot;tcp&quot;</span></span><br><span class="line"><span class="attr">healthCheck.timeoutSeconds</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">healthCheck.maxFailed</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">healthCheck.intervalSeconds</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="section">[proxies.plugin]</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;https2http&quot;</span></span><br><span class="line"><span class="attr">localAddr</span> = <span class="string">&quot;172.31.0.1:3000&quot;</span></span><br><span class="line"><span class="attr">crtPath</span> = <span class="string">&quot;/usr/local/apps/frpc/config/certs/ad.äºŒçº§åŸŸå.pem&quot;</span></span><br><span class="line"><span class="attr">keyPath</span> = <span class="string">&quot;/usr/local/apps/frpc/config/certs/ad.äºŒçº§åŸŸå.key&quot;</span></span><br><span class="line"><span class="attr">hostHeaderRewrite</span> = <span class="string">&quot;172.31.0.1&quot;</span></span><br><span class="line"><span class="attr">requestHeaders.set.x-from-where</span> = <span class="string">&quot;frp&quot;</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¯æš´éœ²ä¸€ä¸ªæœåŠ¡ï¼Œåªéœ€è¦å¢åŠ ç±»ä¼¼çš„é…ç½®æ–‡ä»¶å³å¯ï¼Œè¦æ›´æ”¹çš„å°±æ˜¯ <code>customDomains</code> è®¿é—®åŸŸåï¼Œ<code>localAddr</code> ç›®æ ‡æœåŠ¡è¿è¡Œçš„ <code>ip</code> åŠç«¯å£ã€è¯¥åŸŸåå¯¹åº”è¯ä¹¦ã€‚</p>
</li>
<li><p>ssh.toml</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[[proxies]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;SSH&quot;</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;tcp&quot;</span></span><br><span class="line"><span class="attr">localIP</span> = <span class="string">&quot;172.31.0.1&quot;</span></span><br><span class="line"><span class="attr">localPort</span> = <span class="number">22</span></span><br><span class="line"><span class="attr">remotePort</span> = <span class="number">15020</span></span><br><span class="line"></span><br><span class="line"><span class="attr">transport.useEncryption</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">transport.useCompression</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">healthCheck.type</span> = <span class="string">&quot;tcp&quot;</span></span><br><span class="line"><span class="attr">healthCheck.timeoutSeconds</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">healthCheck.maxFailed</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">healthCheck.intervalSeconds</span> = <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äº ssh è®¿é—®ï¼Œç¨æœ‰ä¸åŒï¼Œéœ€è¦å¢åŠ ä¸€ä¸ª <code>remotePort</code> å‚æ•°ã€‚æˆ‘ä»¬è®¿é—®çš„æ—¶å€™éœ€è¦ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh xx@xxx -p 15020</span><br></pre></td></tr></table></figure></li>
<li><h3 id="åŸŸåè§£æ"><a href="#åŸŸåè§£æ" class="headerlink" title="åŸŸåè§£æ"></a>åŸŸåè§£æ</h3><p>æ‰€æœ‰æœåŠ¡çš„è®¿é—®éƒ½æ˜¯é€šè¿‡åŸŸåæ¥æš´éœ²çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ä»æˆ‘ä»¬çš„åŸŸåæœåŠ¡å•†é‚£é‡Œæ·»åŠ ä¸€ä¸ªæ³›è§£æå³å¯ï¼Œå¦‚æœä½ çš„äºŒçº§åŸŸåæ˜¯ï¼š<code>test.com</code>ï¼Œåªéœ€è¦å¢åŠ  <code>*.test.com</code> è§£æåˆ°å…¬ç½‘æœåŠ¡å™¨ <code>ip</code> å³å¯ã€‚</p>
</li>
</ul>
</li>
<li><h3 id="å¼€å¯-TLS-åŒå‘æ ¡éªŒ"><a href="#å¼€å¯-TLS-åŒå‘æ ¡éªŒ" class="headerlink" title="å¼€å¯ TLS åŒå‘æ ¡éªŒ"></a>å¼€å¯ TLS åŒå‘æ ¡éªŒ</h3><p>  ä¸ºäº†é¿å…ä¸­é—´äººæ”»å‡»ï¼Œæˆ‘ä»¬å¯ä»¥å¯ç”¨å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯åŒçº¿éªŒè¯ï¼Œä»¥ç¡®ä¿é“¾æ¥çš„å®‰å…¨æ€§ã€‚</p>
<blockquote>
<p>ä» v0.50.0 å¼€å§‹ï¼Œtransport.tls.enable çš„é»˜è®¤å€¼ä¸º trueï¼Œå³ï¼šé»˜è®¤å¼€å¯ TLS åè®®åŠ å¯†ã€‚å¦‚æœ frps ç«¯æ²¡æœ‰é…ç½®è¯ä¹¦ï¼Œåˆ™ä¼šä½¿ç”¨éšæœºç”Ÿæˆçš„è¯ä¹¦æ¥åŠ å¯†æµé‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œfrpc å¼€å¯ TLS åŠ å¯†åŠŸèƒ½ï¼Œä½†æ˜¯ä¸æ ¡éªŒ frps çš„è¯ä¹¦ã€‚</p>
</blockquote>
<p>  <strong>ğŸ’¡ Tips</strong></p>
<blockquote>
<p>æ³¨æ„ï¼šå¯ç”¨æ­¤åŠŸèƒ½åé™¤ xtcp å¤–ï¼Œå¯ä»¥ä¸ç”¨å†è®¾ç½® transport.useEncryption é‡å¤åŠ å¯†ã€‚</p>
</blockquote>
<h4 id="å‡†å¤‡ä»¥ä¸‹é…ç½®æ–‡ä»¶-openssl-cnf"><a href="#å‡†å¤‡ä»¥ä¸‹é…ç½®æ–‡ä»¶-openssl-cnf" class="headerlink" title="å‡†å¤‡ä»¥ä¸‹é…ç½®æ–‡ä»¶ openssl.cnf"></a>å‡†å¤‡ä»¥ä¸‹é…ç½®æ–‡ä»¶ openssl.cnf</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[ ca ]</span></span><br><span class="line"><span class="attr">default_ca</span> = CA_default</span><br><span class="line"><span class="section">[ CA_default ]</span></span><br><span class="line"><span class="attr">x509_extensions</span> = usr_cert</span><br><span class="line"><span class="section">[ req ]</span></span><br><span class="line"><span class="attr">default_bits</span>        = <span class="number">2048</span></span><br><span class="line"><span class="attr">default_md</span>          = sha256</span><br><span class="line"><span class="attr">default_keyfile</span>     = privkey.pem</span><br><span class="line"><span class="attr">distinguished_name</span>  = req_distinguished_name</span><br><span class="line"><span class="attr">attributes</span>          = req_attributes</span><br><span class="line"><span class="attr">x509_extensions</span>     = v3_ca</span><br><span class="line"><span class="attr">string_mask</span>         = utf8only</span><br><span class="line"><span class="section">[ req_distinguished_name ]</span></span><br><span class="line"><span class="section">[ req_attributes ]</span></span><br><span class="line"><span class="section">[ usr_cert ]</span></span><br><span class="line"><span class="attr">basicConstraints</span>       = CA:<span class="literal">FALSE</span></span><br><span class="line"><span class="attr">nsComment</span>              = <span class="string">&quot;OpenSSL Generated Certificate&quot;</span></span><br><span class="line"><span class="attr">subjectKeyIdentifier</span>   = hash</span><br><span class="line"><span class="attr">authorityKeyIdentifier</span> = keyid,issuer</span><br><span class="line"><span class="section">[ v3_ca ]</span></span><br><span class="line"><span class="attr">subjectKeyIdentifier</span>   = hash</span><br><span class="line"><span class="attr">authorityKeyIdentifier</span> = keyid:always,issuer</span><br><span class="line"><span class="attr">basicConstraints</span>       = CA:<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h4 id="ç”Ÿæˆ-CA"><a href="#ç”Ÿæˆ-CA" class="headerlink" title="ç”Ÿæˆ CA"></a>ç”Ÿæˆ CA</h4>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out ca.key 2048</span><br><span class="line">openssl req -x509 -new -nodes -key ca.key -subj &quot;/CN=frps.ca.com&quot; -days 5000 -out ca.crt</span><br></pre></td></tr></table></figure>
<h4 id="ç”ŸæˆæœåŠ¡ç«¯è¯ä¹¦"><a href="#ç”ŸæˆæœåŠ¡ç«¯è¯ä¹¦" class="headerlink" title="ç”ŸæˆæœåŠ¡ç«¯è¯ä¹¦"></a>ç”ŸæˆæœåŠ¡ç«¯è¯ä¹¦</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out server.key 2048</span><br><span class="line"></span><br><span class="line">openssl req -new -sha256 -key server.key \</span><br><span class="line">-subj &quot;/C=XX/ST=DEFAULT/L=DEFAULT/O=DEFAULT/CN=server.com&quot; \</span><br><span class="line">-reqexts SAN \</span><br><span class="line">-config &lt;(cat openssl.cnf &lt;(printf &quot;\n[SAN]\nsubjectAltName=DNS:localhost,IP: ä½ çš„æœåŠ¡ç«¯å…¬ç½‘ ip,DNS:ä½ çš„æœåŠ¡ç«¯åŸŸå&quot;)) \</span><br><span class="line">-out server.csr</span><br><span class="line"></span><br><span class="line">openssl x509 -req -days 5000 -sha256 \</span><br><span class="line">-in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial \</span><br><span class="line">-extfile &lt;(printf &quot;subjectAltName=DNS:localhost,IP: ä½ çš„æœåŠ¡ç«¯å…¬ç½‘ ip,DNS:ä½ çš„æœåŠ¡ç«¯åŸŸå&quot;) \ </span><br><span class="line">-out server.crt</span><br></pre></td></tr></table></figure>

<h4 id="ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦"><a href="#ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦" class="headerlink" title="ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦"></a>ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out client.key 2048</span><br><span class="line"></span><br><span class="line">openssl req -new -sha256 -key client.key \</span><br><span class="line">-subj &quot;/C=XX/ST=DEFAULT/L=DEFAULT/O=DEFAULT/CN=frp.client.com&quot; \</span><br><span class="line">-reqexts SAN \</span><br><span class="line">-config &lt;(cat openssl.cnf &lt;(printf &quot;\n[SAN]\nsubjectAltName=DNS:frp.client.com,DNS:frp.client.com&quot;)) \</span><br><span class="line">-out client.csr</span><br><span class="line"></span><br><span class="line">openssl x509 -req -days 5000 -sha256 \</span><br><span class="line">-in client.csr -CA ca.crt -CAkey ca.key -CAcreateserial \</span><br><span class="line">-extfile &lt;(printf &quot;subjectAltName=DNS:frp.client.com,DNS:frp.client.com&quot;) \</span><br><span class="line">-out client.crt</span><br></pre></td></tr></table></figure>
<h4 id="æœ€ç»ˆçš„é…ç½®æ–‡ä»¶"><a href="#æœ€ç»ˆçš„é…ç½®æ–‡ä»¶" class="headerlink" title="æœ€ç»ˆçš„é…ç½®æ–‡ä»¶"></a>æœ€ç»ˆçš„é…ç½®æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ ca.crt</span><br><span class="line">â”œâ”€â”€ ca.key</span><br><span class="line">â”œâ”€â”€ ca.srl</span><br><span class="line">â”œâ”€â”€ client.crt</span><br><span class="line">â”œâ”€â”€ client.csr</span><br><span class="line">â”œâ”€â”€ client.key</span><br><span class="line">â”œâ”€â”€ openssl.cnf</span><br><span class="line">â”œâ”€â”€ server.crt</span><br><span class="line">â”œâ”€â”€ server.csr</span><br><span class="line">â””â”€â”€ server.key</span><br><span class="line">   </span><br></pre></td></tr></table></figure>
<p>  å°†è¯ä¹¦ä¸Šä¼ åˆ°æœåŠ¡ç«¯å¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¢åŠ  tls éªŒè¯ç›¸å…³é…ç½®ï¼š   </p>
<ul>
<li><p>frpc.toml</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">transport.tls.certFile</span> = <span class="string">&quot;/usr/local/apps/frpc/config/certs/client.crt&quot;</span></span><br><span class="line"><span class="attr">transport.tls.keyFile</span> = <span class="string">&quot;/usr/local/apps/frpc/config/certs/client.key&quot;</span></span><br><span class="line"><span class="attr">transport.tls.trustedCaFile</span> = <span class="string">&quot;/usr/local/apps/frpc/config/certs/ca.crt&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>fprs.toml </p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">transport.tls.certFile</span> = <span class="string">&quot;/to/cert/path/server.crt&quot;</span></span><br><span class="line"><span class="attr">transport.tls.keyFile</span> = <span class="string">&quot;/to/key/path/server.key&quot;</span></span><br><span class="line"><span class="attr">transport.tls.trustedCaFile</span> = <span class="string">&quot;/to/ca/path/ca.crt&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>  éšåé‡å¯æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ã€‚è‡³æ­¤ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åŒå‘éªŒè¯é…ç½®å®Œæ¯•ã€‚</p>
</li>
</ul>
<h2 id="Docker-ç½‘ç»œæ¨¡å¼"><a href="#Docker-ç½‘ç»œæ¨¡å¼" class="headerlink" title="Docker ç½‘ç»œæ¨¡å¼"></a>Docker ç½‘ç»œæ¨¡å¼</h2><p>æ•´ä¸ªç³»ç»Ÿçš„ç½‘å…³æ˜¯è½¯è·¯ç”±ï¼Œè€Œè½¯è·¯ç”±ä¸Šä¹Ÿå­˜åœ¨å…¶ä»–éœ€è¦æš´éœ²çš„æœåŠ¡ï¼Œæˆ‘ä»¬åœ¨ Docker ä¸­éƒ¨ç½²æœåŠ¡çš„æ—¶å€™ï¼Œç½‘ç»œæ¨¡å¼éœ€è¦é€‰ä¸º <code>Host</code> æ¨¡å¼ã€‚è¿™æ ·çš„å¥½å¤„å°±æ˜¯ï¼Œå®¹å™¨ä»¥å®¿ä¸»æœºï¼ˆNASï¼‰IP ä½œä¸ºè‡ªå·±çš„ IPï¼Œç«¯å£ä½œä¸ºå®¿ä¸»æœºçš„ç«¯å£ï¼Œé…ç½®èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ã€‚è€Œ <code>bridge</code> æ¨¡å¼ç›¸å½“äºä¸ NAS å¹³çº§ï¼Œé‚£ä¹ˆç”±äºè½¯è·¯ç”±é‡‡ç”¨é™æ€ IP ç»‘å®šï¼Œåˆ†é…å®¹å™¨ IP å°±ä¼šç¨è®¸éº»çƒ¦ï¼Œå› æ­¤å¹¶ä¸æ˜¯å¾ˆæ¨èã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/articles/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/articles/page/68/">68</a><a class="extend next" rel="next" href="/articles/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Tubetrue01"
      src="/articles/img/head.PNG">
  <p class="site-author-name" itemprop="name">Tubetrue01</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/articles/archives/">
        
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/articles/tags/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Tubetrue01" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Tubetrue01" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/articles/Tubetrue01@gmail.com" title="E-Mail â†’ Tubetrue01@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tubetrue01</span>
</div>



        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/articles/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script>
  <script src="/articles/lib/velocity/velocity.min.js"></script>
  <script src="/articles/lib/velocity/velocity.ui.min.js"></script>

<script src="/articles/js/utils.js"></script>

<script src="/articles/js/motion.js"></script>


<script src="/articles/js/schemes/pisces.js"></script>


<script src="/articles/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  















    <div id="pjax">
  

  


    </div>
</body>
</html>
